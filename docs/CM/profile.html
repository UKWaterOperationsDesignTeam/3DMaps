<!DOCTYPE html>
<html>

<head>
  <title>QGIS Track Profile 2 Web</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  <style>
    html,
    body,
    #map,
    #elevation-div {
      height: 100%;
      width: 100%;
      padding: 0px;
      margin: 0px;
      position: relative;
      z-index: 9999;
    }

    #elevation-div { overflow: visible; }
    #map {
      height: 75%;
      position: relative;
      z-index: 1;
    }

    #elevation-div {
      height: 25%;
      font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;
    }

    .data-summary {
      font-family: "Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif;
      font-size: 12px;
      position: absolute;
      bottom: 0;
      left: 45px;
    }

    .data-summary .summaryvalue {
      font-weight: bold;
    }

  </style>
  <style>
   .custom-theme.leaflet-control.elevation .area {
    fill: #ff9bed;
    stroke: hsla(60, 0%, 0%, 0.85);
    stroke-width: 1.5;
   }

   .custom-theme.height-focus.circle-lower {
     fill: #ffb800;
   }

   .custom-theme.elevation-polyline {
     stroke: #ff19f0;
     stroke-opacity: 0.85 ;
   }
 </style>
  <script src="https://d3js.org/d3.v4.js" charset="utf-8"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.2/leaflet.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.2/leaflet-src.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-gpx/1.4.0/gpx.js"></script>

  <link rel="stylesheet" href="https://unpkg.com/@raruto/leaflet-elevation@0.3.1/leaflet-elevation.min.css" />
  <script src="https://unpkg.com/@raruto/leaflet-elevation@0.3.1/leaflet-elevation.min.js"></script>

</head>

<body>

  <div id="map"></div>
  <div id="elevation-div" class="leaflet-control elevation"></div>

  <div id="data-summary" class="data-summary"><span class="totlen"><span class="summarylabel">Total Length: </span><span class="summaryvalue">0</span></span> &mdash; <span class="maxele"><span class="summarylabel">Max Elevation: </span><span class="summaryvalue">0</span></span>
    &mdash; <span class="minele"><span class="summarylabel">Min Elevation: </span><span class="summaryvalue">0</span></span></div>

  <script>
  var opts = {"map": {"center": [41.4583, 12.7059], "zoom": 5, "markerZoomAnimation": false, "zoomControl": false}, "zoomControl": {"position": "topleft"}, "elevationControl": {"data": "{\"name\":\"Updated\", \"type\":\"FeatureCollection\",\"features\": [{ \"type\": \"Feature\", \"properties\": { }, \"geometry\": { \"type\": \"MultiLineString\", \"coordinates\": [ [ [ -4.49590900813433, 56.95198269445,252.914770531636 ], [ -4.4962180181579, 56.9521275050567,253.506686129056 ], [ -4.49649395171812, 56.9521219949949,253.830403401338 ], [ -4.49883516800893, 56.953044011137,258.52543317255 ], [ -4.50028920234947, 56.9537824237019,262.800544647058 ], [ -4.50151469515256, 56.9538585618691,265.441494193937 ], [ -4.50248278041524, 56.9542166389096,269.323237029263 ], [ -4.50308860487015, 56.9550097410567,275.354927535335 ], [ -4.50479093060717, 56.9553279342991,282.726570258911 ], [ -4.50521709286643, 56.9555018304028,284.605350372558 ], [ -4.50615994416312, 56.9554829333102,287.478022932535 ], [ -4.50695954363596, 56.9557311183107,290.039298596306 ], [ -4.50783509862436, 56.9557387215718,292.870649819849 ], [ -4.50857520853161, 56.9557867817935,295.318924357234 ], [ -4.50938327836269, 56.9561605990664,299.57096791859 ], [ -4.5101489303589, 56.9562458826604,302.76571861773 ], [ -4.5107574867536, 56.9570766400892,311.866999937397 ], [ -4.51030581518398, 56.9575512347913,316.580232713718 ], [ -4.51075594678289, 56.9584229184694,334.978397757446 ], [ -4.51099108046693, 56.9591793921964,353.104864788057 ], [ -4.51188668899229, 56.9601679420053,378.54537278166 ], [ -4.5127833460402, 56.9608293391283,394.64881762787 ], [ -4.51570110179597, 56.9624314579596,415.653735041331 ], [ -4.51827844105542, 56.9651286910314,458.566261172488 ], [ -4.5201224179955, 56.9668529876652,482.088948903296 ], [ -4.52200846492926, 56.9678340852294,483.670711295974 ], [ -4.52287064748372, 56.9679802557886,479.166911793321 ], [ -4.523993479517, 56.9685741038161,483.115831661748 ], [ -4.52492895148214, 56.9687816900346,483.5711377882 ], [ -4.5256156394948, 56.9690572034721,485.737334470545 ], [ -4.52745596881428, 56.9693597278209,485.721455386549 ], [ -4.52788580255815, 56.9695838023798,490.330629804111 ], [ -4.53102126439742, 56.9699607404223,491.246644274154 ], [ -4.53193977406051, 56.9702566910212,495.823846651611 ], [ -4.53296223214532, 56.970386965837,498.689846210809 ], [ -4.53399493997259, 56.97066800653,506.984051211744 ], [ -4.53650677709768, 56.9706799895088,509.950794297672 ], [ -4.54093211002643, 56.9700365438809,512.310809305894 ], [ -4.5420073368421, 56.969926617483,517.492433004681 ], [ -4.54265991069709, 56.9696994581493,516.081287842838 ], [ -4.54456485667026, 56.9692580885356,525.12530263453 ], [ -4.54648348036099, 56.9690177207737,540.804085412112 ], [ -4.54664778332527, 56.9687249915213,537.458437096731 ], [ -4.54955000336447, 56.9677096266917,547.149459130973 ], [ -4.54994344719424, 56.9673996384221,544.437133845555 ], [ -4.54987339467883, 56.9670487740618,540.842343888965 ], [ -4.55036571066222, 56.9668374231473,543.367887713714 ], [ -4.55096291806297, 56.9668126587504,544.82852128778 ], [ -4.55240327269952, 56.9663177346672,547.962838932181 ], [ -4.55333883715507, 56.9658519756266,553.641583105205 ], [ -4.55434938466436, 56.964799618572,568.861663397734 ], [ -4.55574189311627, 56.9642804680596,572.498439867228 ], [ -4.55679685639173, 56.9635417298966,582.66153950768 ], [ -4.55715944604457, 56.9631191111252,590.717360535421 ], [ -4.55821400659076, 56.9630472107457,586.630658129191 ], [ -4.55922170094495, 56.9629636787908,585.165117359631 ], [ -4.55972570390192, 56.9625884852288,592.993578360486 ], [ -4.5604582477547, 56.9625231579226,590.972784508144 ], [ -4.56226198561104, 56.9619577644676,605.321609606686 ], [ -4.56353712343943, 56.9614094747684,617.920470212126 ], [ -4.56396892395306, 56.9613251286748,619.023261275973 ], [ -4.56479483854434, 56.96094331173,627.795893731629 ], [ -4.56565496529831, 56.9607243525703,629.251323973803 ], [ -4.5664135826491, 56.9603690694753,633.03229917088 ], [ -4.56701984245282, 56.9601427296306,633.939486469043 ], [ -4.5676113977834, 56.959702795195,638.571049890382 ], [ -4.57295545342427, 56.9599083832391,623.26886572344 ], [ -4.57694169199122, 56.9600015888369,677.80901207318 ], [ -4.57910141904538, 56.9607838727362,733.393931571673 ], [ -4.58093711553844, 56.9612564617389,757.861377432054 ], [ -4.58453781524764, 56.9613690124401,815.581846104721 ], [ -4.58491034565762, 56.9618070745696,835.591719792002 ], [ -4.58594609072866, 56.961749707557,863.978608578963 ], [ -4.58695116583016, 56.9620093151483,905.397519704767 ], [ -4.58863375500666, 56.9616006221413,933.200933941548 ], [ -4.58910736818823, 56.9615980048862,939.16128002906 ], [ -4.59165789088867, 56.9614471444551,974.462747634541 ], [ -4.59225839963547, 56.9611399150546,970.139869193743 ], [ -4.59123734748936, 56.9604781110188,968.342800416506 ], [ -4.59006126207301, 56.9605986440327,990.225055465029 ], [ -4.58948620312873, 56.9604667610247,1000.40349952496 ], [ -4.58718640567856, 56.9595653272409,1049.83311285653 ], [ -4.58680234090709, 56.9576320435786,1081.50564030665 ], [ -4.58723041328132, 56.9552649483752,1090.72260048081 ], [ -4.59162963439086, 56.9544309541205,1109.30189395373 ], [ -4.59417870438738, 56.9541359574804,1107.25506811166 ], [ -4.59709403881972, 56.952775873879,1105.17658913958 ], [ -4.60207019252744, 56.9520091348923,1128.26225493911 ], [ -4.59718047828989, 56.9527417240463,1105.31989731977 ], [ -4.59421812259548, 56.9541351394792,1107.2018495811 ], [ -4.59161982834394, 56.9544262943169,1109.36567195125 ], [ -4.58719049596694, 56.9552585847369,1090.80260048081 ], [ -4.58681498394786, 56.9576245922297,1081.52164030666 ], [ -4.58723946900827, 56.9595714188843,1050.61440617401 ], [ -4.5895129847287, 56.960473396068,999.887243448013 ], [ -4.59010068723178, 56.9605978272699,989.971133383116 ], [ -4.59126182347488, 56.9604515408718,968.148222648404 ], [ -4.59225615511829, 56.9611076076984,970.665200916109 ], [ -4.59233739415924, 56.9617494623018,948.094103238804 ], [ -4.58537548826011, 56.9641988289358,1053.17499991433 ], [ -4.57218850655779, 56.9676522554985,1043.52316058487 ], [ -4.56951611548415, 56.9688727745537,997.371246754308 ], [ -4.56917330449913, 56.9701003251769,1025.45515703061 ], [ -4.56704378179044, 56.9721526796395,990.457409886521 ], [ -4.56526733832741, 56.9732406257933,973.48938084988 ], [ -4.56198897088787, 56.9743862861417,969.493821320057 ], [ -4.55943488005361, 56.974320799814,916.384617055925 ], [ -4.55399391113288, 56.9744285024931,980.516855630377 ], [ -4.5524240951639, 56.9752963503845,957.267857320752 ], [ -4.55286435949148, 56.9755974172813,954.515032815468 ], [ -4.55235151252064, 56.9760392644136,942.34506935897 ], [ -4.5498885864579, 56.9768444201993,953.559905717892 ], [ -4.54443274977923, 56.9782901188999,949.954369571668 ], [ -4.53775825911773, 56.9792480487776,962.793718814999 ], [ -4.53070799672933, 56.9772205524323,914.099951242293 ], [ -4.52944887617993, 56.9775830379848,929.33775088323 ], [ -4.51841794807368, 56.9776438947532,986.067520168179 ], [ -4.51528282812151, 56.9789210702844,973.57928433829 ], [ -4.51932703785203, 56.9768574931641,968.494168621953 ], [ -4.51909778376301, 56.973804744628,878.812129120937 ], [ -4.51698663785672, 56.972563915385,815.754518784691 ], [ -4.51720579221882, 56.9720562340041,798.707532002488 ], [ -4.5131622413981, 56.9692569493471,689.22441889641 ], [ -4.50992078539279, 56.9674787744911,627.679586796494 ], [ -4.50918987342685, 56.9667080402699,614.867062713789 ], [ -4.51054435087808, 56.9651980049286,587.522434082513 ], [ -4.5098833214736, 56.9638093105295,530.387025764826 ], [ -4.51041553385579, 56.963650341233,519.700331672576 ], [ -4.51176204819301, 56.9612911820373,429.848196443522 ], [ -4.51155964728245, 56.9608503932525,419.728024423112 ], [ -4.51188668899229, 56.9601679420053,378.54537278166 ], [ -4.51099108046693, 56.9591793921964,353.104864788057 ], [ -4.51075594678289, 56.9584229184694,334.978397757446 ], [ -4.51030581518398, 56.9575512347913,316.580232713718 ], [ -4.5107574867536, 56.9570766400892,311.866999937397 ], [ -4.5101489303589, 56.9562458826604,302.76571861773 ], [ -4.50938327836269, 56.9561605990664,299.57096791859 ], [ -4.50857520853161, 56.9557867817935,295.318924357234 ], [ -4.50783509862436, 56.9557387215718,292.870649819849 ], [ -4.50695954363596, 56.9557311183107,290.039298596306 ], [ -4.50615994416312, 56.9554829333102,287.478022932535 ], [ -4.50521709286643, 56.9555018304028,284.605350372558 ], [ -4.50479093060717, 56.9553279342991,282.726570258911 ], [ -4.50308860487015, 56.9550097410567,275.354927535335 ], [ -4.50248278041524, 56.9542166389096,269.323237029263 ], [ -4.50151469515256, 56.9538585618691,265.441494193937 ], [ -4.50028920234947, 56.9537824237019,262.800544647058 ], [ -4.49883516800893, 56.953044011137,258.52543317255 ], [ -4.49649395171812, 56.9521219949949,253.830403401338 ], [ -4.4962180181579, 56.9521275050567,253.506686129056 ], [ -4.49590900813433, 56.95198269445,252.914770531636 ]]] } }]}", "options": {"position": "topright", "theme": "custom-theme", "useHeightIndicator": true, "collapsed": false, "detachedView": true, "elevationDiv": "#elevation-div"}}, "layersControl": {"options": {"collapsed": false}}, "otmLayer": {"url": "https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png", "options": {"attribution": "Map data: &copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>, <a href=\"http://viewfinderpanoramas.org\">SRTM</a> | Map style: &copy; <a href=\"https://opentopomap.org\">OpenTopoMap</a> (<a href=\"https://creativecommons.org/licenses/by-sa/3.0/\">CC-BY-SA</a>)"}}} ;
    var map = new L.Map('map', opts.map);

    var baseLayers = {};
    baseLayers.OTM = new L.TileLayer(opts.otmLayer.url, opts.otmLayer.options);

    var controlZoom = new L.Control.Zoom(opts.zoomControl);
    var controlElevation = L.control.elevation(opts.elevationControl.options);
    var controlLayer = L.control.layers(baseLayers, null, opts.layersControl.options);

    controlZoom.addTo(map);
    controlLayer.addTo(map);

    map.addLayer(baseLayers.OTM);

    map.on('eledata_loaded', function(e) {
      var q = document.querySelector.bind(document);
      var track = e.track_info;

      controlLayer.addOverlay(e.layer, e.name);

      q('.totlen .summaryvalue').innerHTML = track.distance.toFixed(2) + " km";
      q('.maxele .summaryvalue').innerHTML = track.elevation_max.toFixed(2) + " m";
      q('.minele .summaryvalue').innerHTML = track.elevation_min.toFixed(2) + " m";
    });

    controlElevation.loadChart(map);
    controlElevation.loadData(opts.elevationControl.data);
  </script>

</body>

</html>
